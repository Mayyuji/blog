import{_ as V,r as x,e as P,f as M,c as S,o as C,a as t,g as o,h as A,n as B,i as X,j as q,F as O,k as Y,l as Z,m as J,b as H,w as E,d as R,t as K,p as T,q as I,s as N,v as L,x as F,y as j}from"./rP_esWRd.js";const Q=["width","height"],ee={__name:"PixelBox",props:{pixelSize:{type:Number,default:4},pHeight:{type:Number,requided:!0,default:void 0},pWidth:{type:Number,default:void 0},isCenter:{type:Boolean,default:!1,validator(g,s){return g&&!s.pWidth?(console.error("isCenter 和 pWidth 需同时存在"),!1):!0}}},setup(g){const s=g,u=x(null),h=x(null),f=x(0);P(f,()=>{s.isCenter||r(u.value)}),M(()=>{r(u.value)});const r=m=>{const l=`
    <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
      <foreignObject width="100%" height="100%">
          ${new XMLSerializer().serializeToString(m)}
      </foreignObject>
    </svg>
    `,n=new Image;n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(l),n.onload=()=>{const p=h.value.getContext("2d"),{pixelSize:i,pWidth:d,pHeight:w}=s;f.value=d||m.parentElement.getBoundingClientRect().width,p.clearRect(0,0,f.value,w);const y=Math.floor(f.value/i),_=Math.floor(w/i),$=document.createElement("canvas");$.width=y,$.height=_;const k=$.getContext("2d");k.imageSmoothingEnabled=!1,k.drawImage(n,0,0,y,_),p.imageSmoothingEnabled=!1,p.drawImage($,0,0,y,_,0,0,f.value,w)}};return(m,v)=>(C(),S("div",{style:B({width:g.pWidth+"px"||"100%",height:g.pHeight+"px"})},[t("canvas",{ref_key:"canvas",ref:h,width:g.pWidth||o(f),height:g.pHeight},null,8,Q),t("div",{ref_key:"slotContainer",ref:u,class:"hidden-box"},[g.isCenter?(C(),S("div",{key:0,style:B({width:g.pWidth+"px",height:g.pHeight+"px",display:"flex",justifyContent:"center",alignItems:"center"})},[A(m.$slots,"default",{},void 0,!0)],4)):A(m.$slots,"default",{key:1},void 0,!0)],512)],4))}},te=V(ee,[["__scopeId","data-v-d201a2a8"]]),oe=["width","height"],se={__name:"PixelImage",props:{src:{type:String,required:!0},pixelSize:{type:Number,default:4},width:{type:Number,default:300},height:{type:Number,default:300},darkColor:{type:String,default:""}},setup(g){const s=g,u=x(null),h=X({width:s.width,height:s.height}),f=async()=>{let r=s.src;if(s.src&&s.src.endsWith(".svg")&&s.darkColor!=="")try{let c=await(await fetch(s.src)).text();c=c.replace(/fill="[^"]*"/g,`fill="${s.darkColor}"`).replace(/stroke="[^"]*"/g,`stroke="${s.darkColor}"`);const l=new Blob([c],{type:"image/svg+xml"});r=URL.createObjectURL(l)}catch(v){console.error("SVG 加载失败:",v);return}const m=new Image;r.startsWith("http")&&(m.crossOrigin="anonymous"),m.src=r,m.onload=()=>{const v=u.value.getContext("2d"),{width:c,height:l}=h,{pixelSize:n}=s;v.clearRect(0,0,c,l);const p=Math.floor(c/n),i=Math.floor(l/n),d=document.createElement("canvas");d.width=p,d.height=i;const w=d.getContext("2d");w.imageSmoothingEnabled=!1,w.drawImage(m,0,0,p,i),v.imageSmoothingEnabled=!1,v.drawImage(d,0,0,p,i,0,0,c,l),s.darkColor!==""&&s.src.endsWith(".svg")&&URL.revokeObjectURL(r)},m.onerror=()=>{console.error("图片加载失败:",s.src)}};return M(f),P(()=>[s.src,s.pixelSize,s.width,s.height,s.darkColor],f),(r,m)=>(C(),S("canvas",{ref_key:"canvas",ref:u,width:h.width,height:h.height,class:"block"},null,8,oe))}},ne=V(se,[["__scopeId","data-v-92b8dc3c"]]),ae=["width","height","viewBox"],le=["d","fill","opacity"],ie={__name:"WaveAnimation",props:{height:{type:Number,default:300},skyHeight:{type:Number,default:0},waveLayers:{type:Array,default:()=>[{amplitude:10,speed:.002,color:"#039BE5",opacity:.9,segments:60,offset:.8},{amplitude:35,speed:.002,color:"#0288D1",opacity:.7,segments:50,offset:.7},{amplitude:15,speed:.001,color:"#4FC3F7",opacity:.5,segments:70,offset:.9}]}},setup(g){const s=g,u=x([]);let h=null,f=0;const r=x(0),m=()=>s.waveLayers.map(c=>({...c,path:""})),v=(c=1e3)=>{f||(f=c);const l=c-f,n=s.height-s.skyHeight,p=s.skyHeight;u.value=u.value.map(i=>{const d=p+n*(1-i.offset);let w=`M 0 ${s.height} L 0 ${d+i.amplitude}`;for(let y=1;y<=i.segments;y++){const _=y*(r.value/i.segments),$=Math.sin(y*.1)*.2,k=d+i.amplitude*Math.cos(y*.3+l*i.speed+$),z=(y-1)*(r.value/i.segments),U=d+i.amplitude*Math.cos((y-1)*.3+l*i.speed+$),b=z+(_-z)/3,e=U,W=z+(_-z)*2/3;w+=` C ${b} ${e}, ${W} ${k}, ${_} ${k}`}return w+=` L ${r.value} ${s.height} Z`,{...i,path:w}}),h=requestAnimationFrame(v)};return M(()=>{window.innerWidth&&(r.value=window.innerWidth),u.value=m(),h=requestAnimationFrame(v)}),q(()=>{h&&cancelAnimationFrame(h)}),(c,l)=>(C(),S("svg",{width:o(r),height:g.height,viewBox:`0 0 ${o(r)} ${g.height}`,preserveAspectRatio:"xMidYMid meet",class:"wave-container"},[(C(!0),S(O,null,Y(o(u),(n,p)=>(C(),S("path",{key:p,d:n.path,fill:n.color,opacity:n.opacity,class:"wave-layer"},null,8,le))),128))],8,ae))}},re=V(ie,[["__scopeId","data-v-ea059230"]]),de={class:"control"},ce={key:0,class:"clouds-box"},pe={class:"contnet"},ue={class:"title"},he={class:"nes-text is-primary"},ge={class:"ground"},fe={class:"nes-field"},me={class:"nes-field"},xe=["checked"],ve={class:"nes-field"},be={class:"nes-field"},ye={class:"flex-line"},we={class:"nes-field"},ke={class:"flex-line"},_e={__name:"index",setup(g){const s=Z(),u=x("#ffffff"),h=x(!1),f=x(""),r=x(null);let m=null;const v=x(),c=x([]),l=x([{amplitude:10,speed:.002,color:"#039BE5",opacity:.9,segments:60,offset:.8},{amplitude:35,speed:.002,color:"#0288D1",opacity:.7,segments:50,offset:.7},{amplitude:15,speed:.001,color:"#4FC3F7",opacity:.5,segments:70,offset:.9}]),n=x(["#f7e3b2","#f0d9a7","#e8c988"]),p=x(!1),i=x("WUYUE"),d=()=>{v.value=window.innerWidth,clearTimeout(m),m=setTimeout(()=>{f.value=k(1,1e6)},300)},w=x(130),y=()=>{w.value+=180,r.value&&(r.value.style.transform=`rotate(${w.value}deg)`,r.value.style.transition="transform 0.8s cubic-bezier(0, 0, 0.58, 1.0)"),h.value=!h.value,h.value?(u.value="#C0C0C0",document.documentElement.classList.toggle("dark"),localStorage.setItem("isDark","1"),_("#0A2463","#1E2761","#7C98B3"),$("#212b39","#2c3e50","#3a5169")):(u.value="#ffffff",document.documentElement.classList.remove("dark"),localStorage.removeItem("isDark"),_("#039BE5","#0288D1","#4FC3F7"),$("#f7e3b2","#f0d9a7","#e8c988")),d()},_=(b,e,W)=>{l.value[0].color=b,l.value[1].color=e,l.value[2].color=W},$=(b,e,W)=>{n.value[0]=b,n.value[1]=e,n.value[2]=W},k=(b,e)=>(b=Math.ceil(b),e=Math.floor(e),Math.floor(Math.random()*(e-b+1))+b),z=()=>{c.value=[],setTimeout(()=>{for(let b=0;b<6;b++)c.value.push({id:b,src:`/svg/clouds_${k(0,3)}.svg`,width:k(120,240),height:k(30,70),top:k(0,140),duration:k(20,50),delay:k(0,25)})})},U=()=>{s.push("/home")};return M(()=>{v.value=window.innerWidth,(localStorage.isDark==="1"||!1)&&y(),z(),window.addEventListener("resize",d)}),q(()=>{window.removeEventListener("resize",d)}),(b,e)=>{const W=te,D=ne,G=re;return C(),S("div",de,[t("div",{class:I(["world",{"world-setting":o(p)}]),style:B({"--page-width":o(v)+"px"})},[t("div",{class:"sky",onClick:y},[t("div",{ref_key:"godControlRef",ref:r,class:"god-box",style:{transform:"rotate(130deg)"}},[H(W,{class:"sun",pWidth:200,pHeight:200,isCenter:""},{default:E(()=>e[9]||(e[9]=[t("div",{style:{width:"100px",height:"100px",background:"radial-gradient(circle, #FFD700 0%, #FFA500 70%, #FF4500 100%)","border-radius":"50%","box-shadow":"0 0 60px rgba(255, 165, 0, 0.8)"}},null,-1)])),_:1,__:[9]}),H(W,{class:"moon",pWidth:200,pHeight:200,isCenter:""},{default:E(()=>e[10]||(e[10]=[t("div",{style:{width:"100px",height:"100px",background:"radial-gradient(circle at 30% 30%, #f8f8ff 0%, #e8e8e8 10%, #d0d0d0 30%, #b0b0b0 50%, #909090 70%, #707070 100%), linear-gradient(to bottom, rgba(180, 180, 200, 0.2), rgba(100, 100, 120, 0.1))","border-radius":"50%","box-shadow":"0 0 50px rgba(200, 200, 255, 0.3), 0 0 150px rgba(180, 180, 255, 0.1), inset 5px 0 15px rgba(255, 255, 255, 0.6), inset -5px 0 10px rgba(0, 0, 0, 0.3)",position:"relative",overflow:"hidden"}},[t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"20px",height:"20px",top:"60px",left:"20px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"14px",height:"14px",top:"50px",right:"40px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"8px",height:"8px",top:"30px",left:"20px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"12px",height:"12px",top:"20px",left:"60px"}})],-1)])),_:1,__:[10]})],512),o(c).length?(C(),S("div",ce,[(C(!0),S(O,null,Y(o(c),a=>(C(),N(D,{key:a.id,class:"cloud",src:a.src,width:a.width,height:a.height,darkColor:o(u),style:B({top:a.top+"px","animation-duration":a.duration+"s","animation-delay":a.delay+"s"})},null,8,["src","width","height","darkColor","style"]))),128))])):J("",!0),t("div",pe,[t("div",ue,[e[11]||(e[11]=R(" 欢迎来到 ")),t("span",he,K(o(i)),1),e[12]||(e[12]=R(" 的世界 "))]),e[13]||(e[13]=t("div",{class:"desc"}," 记录代码的和日常。 ",-1)),t("button",{type:"button",class:I(["nes-btn start-btn",{"is-success":!o(h)}]),onClick:T(U,["stop"])},"开 始",2)])]),t("div",ge,[H(W,{class:"ship",pWidth:100,pHeight:100},{default:E(()=>e[14]||(e[14]=[t("div",{style:{"font-size":"190px"}},"⛵",-1)])),_:1,__:[14]}),(C(),N(G,{style:{"margin-bottom":"-60px","z-index":"20",position:"relative"},waveLayers:o(l),height:200,key:o(f)},null,8,["waveLayers"])),(C(),N(W,{pHeight:200,pWidth:o(v),key:o(f)},{default:E(()=>[t("div",{style:B(`
          width: 100%;
          height: 200px;
          background:
          radial-gradient(circle at 20% 80%, ${o(n)[0]} 10px, transparent 11px),
          radial-gradient(circle at 40% 70%, ${o(n)[0]} 8px, transparent 9px),
          radial-gradient(circle at 70% 85%, ${o(n)[0]} 12px, transparent 13px),
          radial-gradient(circle at 85% 65%, ${o(n)[0]} 9px, transparent 10px),
          linear-gradient(to bottom, ${o(n)[1]}, ${o(n)[2]});
          background-size: 80px 80px, 120px 120px, 90px 90px, 200px 200px;`)},null,4)]),_:1},8,["pWidth"]))]),t("button",{type:"button",class:I(["nes-btn control-btn",{"is-primary":!o(h)}]),onClick:e[0]||(e[0]=T(a=>p.value=!o(p),["stop"]))}," <> ",2)],6),t("div",{class:I(["with-title control-box",{"control-box-show":o(p),"is-dark":o(p),"is-rounded":o(p),"nes-container":o(p)}])},[e[24]||(e[24]=t("p",{class:"title"},"世界设定",-1)),t("div",fe,[e[15]||(e[15]=t("label",null,"世界名称",-1)),L(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>j(i)?i.value=a:null),class:"nes-input"},null,512),[[F,o(i)]])]),t("div",me,[e[17]||(e[17]=t("label",null,"黑暗模式",-1)),t("label",null,[t("input",{type:"checkbox",class:"nes-checkbox is-dark",checked:o(h),onChange:y},null,40,xe),e[16]||(e[16]=t("span",null,"Enable",-1))])]),t("div",ve,[e[18]||(e[18]=t("label",null,"云朵颜色",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=a=>j(u)?u.value=a:null)},null,512),[[F,o(u)]])]),t("div",be,[e[20]||(e[20]=t("label",null,"海水颜色",-1)),t("div",ye,[e[19]||(e[19]=R(" 深->浅 ")),L(t("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=a=>o(l)[0].color=a),onChange:d},null,544),[[F,o(l)[0].color]]),L(t("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=a=>o(l)[1].color=a),onChange:d},null,544),[[F,o(l)[1].color]]),L(t("input",{type:"color","onUpdate:modelValue":e[5]||(e[5]=a=>o(l)[2].color=a),onChange:d},null,544),[[F,o(l)[2].color]])])]),t("div",we,[e[23]||(e[23]=t("label",null,"沙滩颜色",-1)),t("div",ke,[e[21]||(e[21]=t("span",null,"斑点",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[6]||(e[6]=a=>o(n)[0]=a),onChange:d},null,544),[[F,o(n)[0]]]),e[22]||(e[22]=t("span",null,"远->近",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[7]||(e[7]=a=>o(n)[1]=a),onChange:d},null,544),[[F,o(n)[1]]]),L(t("input",{type:"color","onUpdate:modelValue":e[8]||(e[8]=a=>o(n)[2]=a),onChange:d},null,544),[[F,o(n)[2]]])])])],2)])}}};export{_e as default};
