import{_ as D,r as m,h as P,G as B,c as S,o as k,a as t,l as s,H as A,I as F,J,K as j,F as q,E as G,L as K,M as Q,b as U,w as M,d as N,t as Z,N as T,O as z,P as V,Q as L,R as I,S as O}from"./DEdT8XY-.js";const ee=["width","height"],te={__name:"PixelBox",props:{pixelSize:{type:Number,default:4},pHeight:{type:Number,requided:!0,default:void 0},pWidth:{type:Number,default:void 0},isCenter:{type:Boolean,default:!1,validator(f,o){return f&&!o.pWidth?(console.error("isCenter 和 pWidth 需同时存在"),!1):!0}}},setup(f){const o=f,u=m(null),g=m(null),h=m(0);P(h,()=>{o.isCenter||r(u.value)}),B(()=>{r(u.value)});const r=x=>{const i=`
    <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
      <foreignObject width="100%" height="100%">
          ${new XMLSerializer().serializeToString(x)}
      </foreignObject>
    </svg>
    `,l=new Image;l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i),l.onload=()=>{const p=g.value.getContext("2d"),{pixelSize:a,pWidth:d,pHeight:w}=o;h.value=d||x.parentElement.getBoundingClientRect().width,p.clearRect(0,0,h.value,w);const b=Math.floor(h.value/a),$=Math.floor(w/a),W=document.createElement("canvas");W.width=b,W.height=$;const _=W.getContext("2d");_.imageSmoothingEnabled=!1,_.drawImage(l,0,0,b,$),p.imageSmoothingEnabled=!1,p.drawImage(W,0,0,b,$,0,0,h.value,w)}};return(x,v)=>(k(),S("div",{style:F({width:f.pWidth+"px"||"100%",height:f.pHeight+"px"})},[t("canvas",{ref_key:"canvas",ref:g,width:f.pWidth||s(h),height:f.pHeight},null,8,ee),t("div",{ref_key:"slotContainer",ref:u,class:"hidden-box"},[f.isCenter?(k(),S("div",{key:0,style:F({width:f.pWidth+"px",height:f.pHeight+"px",display:"flex",justifyContent:"center",alignItems:"center"})},[A(x.$slots,"default",{},void 0,!0)],4)):A(x.$slots,"default",{key:1},void 0,!0)],512)],4))}},se=D(te,[["__scopeId","data-v-d201a2a8"]]),oe=["width","height"],le={__name:"PixelImage",props:{src:{type:String,required:!0},pixelSize:{type:Number,default:4},width:{type:Number,default:300},height:{type:Number,default:300},darkColor:{type:String,default:""}},setup(f){const o=f,u=m(null),g=J({width:o.width,height:o.height}),h=async()=>{let r=o.src;if(o.src&&o.src.endsWith(".svg")&&o.darkColor!=="")try{let c=await(await fetch(o.src)).text();c=c.replace(/fill="[^"]*"/g,`fill="${o.darkColor}"`).replace(/stroke="[^"]*"/g,`stroke="${o.darkColor}"`);const i=new Blob([c],{type:"image/svg+xml"});r=URL.createObjectURL(i)}catch(v){console.error("SVG 加载失败:",v);return}const x=new Image;r.startsWith("http")&&(x.crossOrigin="anonymous"),x.src=r,x.onload=()=>{const v=u.value.getContext("2d"),{width:c,height:i}=g,{pixelSize:l}=o;v.clearRect(0,0,c,i);const p=Math.floor(c/l),a=Math.floor(i/l),d=document.createElement("canvas");d.width=p,d.height=a;const w=d.getContext("2d");w.imageSmoothingEnabled=!1,w.drawImage(x,0,0,p,a),v.imageSmoothingEnabled=!1,v.drawImage(d,0,0,p,a,0,0,c,i),o.darkColor!==""&&o.src.endsWith(".svg")&&URL.revokeObjectURL(r)},x.onerror=()=>{console.error("图片加载失败:",o.src)}};return B(h),P(()=>[o.src,o.pixelSize,o.width,o.height,o.darkColor],h),(r,x)=>(k(),S("canvas",{ref_key:"canvas",ref:u,width:g.width,height:g.height,class:"block"},null,8,oe))}},ne=D(le,[["__scopeId","data-v-92b8dc3c"]]),ie=["width","height","viewBox"],ae=["d","fill","opacity"],re={__name:"WaveAnimation",props:{height:{type:Number,default:300},skyHeight:{type:Number,default:0},waveLayers:{type:Array,default:()=>[{amplitude:10,speed:.002,color:"#039BE5",opacity:.9,segments:60,offset:.8},{amplitude:35,speed:.002,color:"#0288D1",opacity:.7,segments:50,offset:.7},{amplitude:15,speed:.001,color:"#4FC3F7",opacity:.5,segments:70,offset:.9}]}},setup(f){const o=f,u=m([]);let g=null,h=0;const r=m(0),x=()=>o.waveLayers.map(c=>({...c,path:""})),v=(c=1e3)=>{h||(h=c);const i=c-h,l=o.height-o.skyHeight,p=o.skyHeight;u.value=u.value.map(a=>{const d=p+l*(1-a.offset);let w=`M 0 ${o.height} L 0 ${d+a.amplitude}`;for(let b=1;b<=a.segments;b++){const $=b*(r.value/a.segments),W=Math.sin(b*.1)*.2,_=d+a.amplitude*Math.cos(b*.3+i*a.speed+W),E=(b-1)*(r.value/a.segments),H=d+a.amplitude*Math.cos((b-1)*.3+i*a.speed+W),R=E+($-E)/3,y=H,e=E+($-E)*2/3;w+=` C ${R} ${y}, ${e} ${_}, ${$} ${_}`}return w+=` L ${r.value} ${o.height} Z`,{...a,path:w}}),g=requestAnimationFrame(v)};return B(()=>{window.innerWidth&&(r.value=window.innerWidth),u.value=x(),g=requestAnimationFrame(v)}),j(()=>{g&&cancelAnimationFrame(g)}),(c,i)=>(k(),S("svg",{width:s(r),height:f.height,viewBox:`0 0 ${s(r)} ${f.height}`,preserveAspectRatio:"xMidYMid meet",class:"wave-container"},[(k(!0),S(q,null,G(s(u),(l,p)=>(k(),S("path",{key:p,d:l.path,fill:l.color,opacity:l.opacity,class:"wave-layer"},null,8,ae))),128))],8,ie))}},de=D(re,[["__scopeId","data-v-ea059230"]]),ce="data:image/svg+xml,%3csvg%20width='200'%20height='60'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='30'%20cy='30'%20r='20'%20fill='%23fff'/%3e%3ccircle%20cx='50'%20cy='25'%20r='15'%20fill='%23fff'/%3e%3ccircle%20cx='70'%20cy='30'%20r='20'%20fill='%23fff'/%3e%3c/svg%3e",pe="data:image/svg+xml,%3csvg%20width='200'%20height='60'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='30'%20cy='25'%20r='15'%20fill='%23fff'/%3e%3ccircle%20cx='50'%20cy='20'%20r='10'%20fill='%23fff'/%3e%3ccircle%20cx='70'%20cy='25'%20r='15'%20fill='%23fff'/%3e%3c/svg%3e",ue="data:image/svg+xml,%3csvg%20width='200'%20height='60'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='40'%20cy='20'%20r='20'%20fill='%23fff'/%3e%3ccircle%20cx='70'%20cy='15'%20r='15'%20fill='%23fff'/%3e%3ccircle%20cx='100'%20cy='20'%20r='20'%20fill='%23fff'/%3e%3ccircle%20cx='130'%20cy='18'%20r='18'%20fill='%23fff'/%3e%3c/svg%3e",ge="data:image/svg+xml,%3csvg%20width='200'%20height='60'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='40'%20cy='30'%20r='20'%20fill='%23fff'/%3e%3ccircle%20cx='70'%20cy='25'%20r='25'%20fill='%23fff'/%3e%3ccircle%20cx='100'%20cy='30'%20r='20'%20fill='%23fff'/%3e%3c/svg%3e",fe={class:"control"},he={key:0,class:"clouds-box"},xe={class:"contnet"},me={class:"title"},ve={class:"nes-text is-primary"},ye={class:"ground"},be={class:"nes-field"},we={class:"nes-field"},_e=["checked"],ke={class:"nes-field"},Ce={class:"nes-field"},$e={class:"flex-line"},We={class:"nes-field"},Se={class:"flex-line"},Ie={__name:"index",setup(f){const o=K(),u=m("#ffffff"),g=m(!1),h=m(""),r=m(null);let x=null;const v=m(),c=m([]),i=m([{amplitude:10,speed:.002,color:"#039BE5",opacity:.9,segments:60,offset:.8},{amplitude:35,speed:.002,color:"#0288D1",opacity:.7,segments:50,offset:.7},{amplitude:15,speed:.001,color:"#4FC3F7",opacity:.5,segments:70,offset:.9}]),l=m(["#f7e3b2","#f0d9a7","#e8c988"]),p=m(!1),a=m("WUYUE"),d=()=>{v.value=window.innerWidth,clearTimeout(x),x=setTimeout(()=>{h.value=_(1,1e6)},300)},w=m(130),b=()=>{w.value+=180,r.value&&(r.value.style.transform=`rotate(${w.value}deg)`,r.value.style.transition="transform 0.8s cubic-bezier(0, 0, 0.58, 1.0)"),g.value=!g.value,g.value?(u.value="#C0C0C0",document.documentElement.classList.toggle("dark"),localStorage.setItem("isDark","1"),$("#0A2463","#1E2761","#7C98B3"),W("#212b39","#2c3e50","#3a5169")):(u.value="#ffffff",document.documentElement.classList.remove("dark"),localStorage.removeItem("isDark"),$("#039BE5","#0288D1","#4FC3F7"),W("#f7e3b2","#f0d9a7","#e8c988")),d()},$=(y,e,C)=>{i.value[0].color=y,i.value[1].color=e,i.value[2].color=C},W=(y,e,C)=>{l.value[0]=y,l.value[1]=e,l.value[2]=C},_=(y,e)=>(y=Math.ceil(y),e=Math.floor(e),Math.floor(Math.random()*(e-y+1))+y),E=Object.assign({"/assets/svg/clouds_0.svg":ce,"/assets/svg/clouds_1.svg":pe,"/assets/svg/clouds_2.svg":ue,"/assets/svg/clouds_3.svg":ge}),H=()=>{c.value=[],setTimeout(()=>{for(let y=0;y<6;y++){const e=_(0,3),C=E[`/assets/svg/clouds_${e}.svg`];c.value.push({id:y,src:C,width:_(120,240),height:_(30,70),top:_(0,140),duration:_(20,50),delay:_(0,25)})}})},R=()=>{o.push("/home")};return B(()=>{v.value=window.innerWidth,(localStorage.isDark==="1"||!1)&&b(),H(),window.addEventListener("resize",d)}),j(()=>{window.removeEventListener("resize",d)}),(y,e)=>{const C=se,Y=ne,X=de;return k(),S("div",fe,[t("div",{class:z(["world",{"world-setting":s(p)}]),style:F({"--page-width":s(v)+"px"})},[t("div",{class:"sky",onClick:b},[t("div",{ref_key:"godControlRef",ref:r,class:"god-box",style:{transform:"rotate(130deg)"}},[U(C,{class:"sun",pWidth:200,pHeight:200,isCenter:""},{default:M(()=>e[9]||(e[9]=[t("div",{style:{width:"100px",height:"100px",background:"radial-gradient(circle, #FFD700 0%, #FFA500 70%, #FF4500 100%)","border-radius":"50%","box-shadow":"0 0 60px rgba(255, 165, 0, 0.8)"}},null,-1)])),_:1,__:[9]}),U(C,{class:"moon",pWidth:200,pHeight:200,isCenter:""},{default:M(()=>e[10]||(e[10]=[t("div",{style:{width:"100px",height:"100px",background:"radial-gradient(circle at 30% 30%, #f8f8ff 0%, #e8e8e8 10%, #d0d0d0 30%, #b0b0b0 50%, #909090 70%, #707070 100%), linear-gradient(to bottom, rgba(180, 180, 200, 0.2), rgba(100, 100, 120, 0.1))","border-radius":"50%","box-shadow":"0 0 50px rgba(200, 200, 255, 0.3), 0 0 150px rgba(180, 180, 255, 0.1), inset 5px 0 15px rgba(255, 255, 255, 0.6), inset -5px 0 10px rgba(0, 0, 0, 0.3)",position:"relative",overflow:"hidden"}},[t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"20px",height:"20px",top:"60px",left:"20px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"14px",height:"14px",top:"50px",right:"40px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"8px",height:"8px",top:"30px",left:"20px"}}),t("div",{style:{position:"absolute","border-radius":"50%",background:"rgba(100, 100, 120, 0.3)","box-shadow":"inset 2px 2px 5px rgba(0, 0, 0, 0.4)",width:"12px",height:"12px",top:"20px",left:"60px"}})],-1)])),_:1,__:[10]})],512),s(c).length?(k(),S("div",he,[(k(!0),S(q,null,G(s(c),n=>(k(),V(Y,{key:n.id,class:"cloud",src:n.src,width:n.width,height:n.height,darkColor:s(u),style:F({top:n.top+"px","animation-duration":n.duration+"s","animation-delay":n.delay+"s"})},null,8,["src","width","height","darkColor","style"]))),128))])):Q("",!0),t("div",xe,[t("div",me,[e[11]||(e[11]=N(" 欢迎来到 ")),t("span",ve,Z(s(a)),1),e[12]||(e[12]=N(" 的世界 "))]),e[13]||(e[13]=t("div",{class:"desc"}," 记录代码的和日常。 ",-1)),t("button",{type:"button",class:z(["nes-btn start-btn",{"is-success":!s(g)}]),onClick:T(R,["stop"])},"开 始",2)])]),t("div",ye,[U(C,{class:"ship",pWidth:100,pHeight:100},{default:M(()=>e[14]||(e[14]=[t("div",{style:{"font-size":"190px"}},"⛵",-1)])),_:1,__:[14]}),(k(),V(X,{style:{"margin-bottom":"-60px","z-index":"20",position:"relative"},waveLayers:s(i),height:200,key:s(h)},null,8,["waveLayers"])),(k(),V(C,{pHeight:200,pWidth:s(v),key:s(h)},{default:M(()=>[t("div",{style:F(`
          width: 100%;
          height: 200px;
          background:
          radial-gradient(circle at 20% 80%, ${s(l)[0]} 10px, transparent 11px),
          radial-gradient(circle at 40% 70%, ${s(l)[0]} 8px, transparent 9px),
          radial-gradient(circle at 70% 85%, ${s(l)[0]} 12px, transparent 13px),
          radial-gradient(circle at 85% 65%, ${s(l)[0]} 9px, transparent 10px),
          linear-gradient(to bottom, ${s(l)[1]}, ${s(l)[2]});
          background-size: 80px 80px, 120px 120px, 90px 90px, 200px 200px;`)},null,4)]),_:1},8,["pWidth"]))]),t("button",{type:"button",class:z(["nes-btn control-btn",{"is-primary":!s(g)}]),onClick:e[0]||(e[0]=T(n=>p.value=!s(p),["stop"]))}," <> ",2)],6),t("div",{class:z(["with-title control-box",{"control-box-show":s(p),"is-dark":s(p),"is-rounded":s(p),"nes-container":s(p)}])},[e[24]||(e[24]=t("p",{class:"title"},"世界设定",-1)),t("div",be,[e[15]||(e[15]=t("label",null,"世界名称",-1)),L(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>O(a)?a.value=n:null),class:"nes-input"},null,512),[[I,s(a)]])]),t("div",we,[e[17]||(e[17]=t("label",null,"黑暗模式",-1)),t("label",null,[t("input",{type:"checkbox",class:"nes-checkbox is-dark",checked:s(g),onChange:b},null,40,_e),e[16]||(e[16]=t("span",null,"Enable",-1))])]),t("div",ke,[e[18]||(e[18]=t("label",null,"云朵颜色",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=n=>O(u)?u.value=n:null)},null,512),[[I,s(u)]])]),t("div",Ce,[e[20]||(e[20]=t("label",null,"海水颜色",-1)),t("div",$e,[e[19]||(e[19]=N(" 深->浅 ")),L(t("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=n=>s(i)[0].color=n),onChange:d},null,544),[[I,s(i)[0].color]]),L(t("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=n=>s(i)[1].color=n),onChange:d},null,544),[[I,s(i)[1].color]]),L(t("input",{type:"color","onUpdate:modelValue":e[5]||(e[5]=n=>s(i)[2].color=n),onChange:d},null,544),[[I,s(i)[2].color]])])]),t("div",We,[e[23]||(e[23]=t("label",null,"沙滩颜色",-1)),t("div",Se,[e[21]||(e[21]=t("span",null,"斑点",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[6]||(e[6]=n=>s(l)[0]=n),onChange:d},null,544),[[I,s(l)[0]]]),e[22]||(e[22]=t("span",null,"远->近",-1)),L(t("input",{type:"color","onUpdate:modelValue":e[7]||(e[7]=n=>s(l)[1]=n),onChange:d},null,544),[[I,s(l)[1]]]),L(t("input",{type:"color","onUpdate:modelValue":e[8]||(e[8]=n=>s(l)[2]=n),onChange:d},null,544),[[I,s(l)[2]]])])])],2)])}}};export{Ie as default};
